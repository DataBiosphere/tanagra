{
  "name": "condition",
  "idAttribute": "id",
  "attributes": [
    { "type": "SIMPLE", "name": "id", "dataType": "INT64" },
    { "type": "SIMPLE", "name": "name", "dataType": "STRING" },
    { "type": "KEY_AND_DISPLAY", "name": "vocabulary", "dataType": "INT64" },
    { "type": "SIMPLE", "name": "standard_concept", "dataType": "STRING" },
    { "type": "SIMPLE", "name": "concept_code", "dataType": "STRING" } ],

  "sourceDataMapping": {
    "dataPointer": "omop_dataset",
    "tablePointer": {
      "table": "concept",
      "filter": {
          "type": "ARRAY",
          "operator": "AND",
          "subfilters": [
            { "type": "BINARY",
              "field": { "column": "domain_id" },
              "operator": "EQUALS",
              "value": { "stringVal": "Condition" } },
            { "type": "BINARY",
              "field": { "column": "valid_end_date" },
              "operator": "GREATER_THAN",
              "value": { "stringVal": "2022-01-01" } } ] } },
    "attributeMappings": {
      "id": { "value": { "column": "concept_id" } },
      "name": { "value": { "column": "concept_name" } },
      "vocabulary": {
        "value": { "column": "vocabulary_id" },
        "display": {
          "column": "vocabulary_id",
          "foreignTable": "vocabulary",
          "foreignKey": "vocabulary_id",
          "foreignColumn": "vocabulary_name" } } },
    "textSearchMapping": {
      "attributes": [ "id", "name" ]
    },
    "hierarchyMappings": {
      "standard": {
        "childParent": {
          "tablePointer": {
            "table": "concept_relationship",
            "filter": { "type": "BINARY",  "field": { "column": "relationship_id" }, "operator": "EQUALS", "value": { "stringVal": "Subsumes" } } },
          "fieldPointers": {
            "parent": { "column": "concept_id_1" },
            "child": { "column": "concept_id_2" }
          }
        }
      }
    }
  },

  "indexDataMapping": {
    "dataPointer": "index_dataset"
  }
}