# An initial OMOP underlay schema for development.

name: aou_synthetic
entities:
  - name: person
    attributes:
      - name: person_id
        dataType: INT64
      - name: gender_concept_id
        dataType: INT64
      - name: gender
        dataType: STRING
      - name: race_concept_id
        dataType: INT64
      - name: race
        dataType: STRING
      - name: ethnicity_concept_id
        dataType: INT64
      - name: ethnicity
        dataType: STRING
      - name: sex_at_birth_concept_id
        dataType: INT64
      - name: sex_at_birth
        dataType: STRING
  - name: condition
    attributes:
      - name: concept_id
        dataType: INT64
      - name: concept_name
        dataType: STRING
      - name: vocabulary_id
        dataType: STRING
      - name: vocabulary_name
        dataType: STRING
      - name: standard_concept
        dataType: STRING
      - name: concept_code
        dataType: STRING
  - name: procedure
    attributes:
      - name: concept_id
        dataType: INT64
      - name: concept_name
        dataType: STRING
      - name: vocabulary_id
        dataType: STRING
      - name: vocabulary_name
        dataType: STRING
      - name: standard_concept
        dataType: STRING
      - name: concept_code
        dataType: STRING
  - name: ingredient
    attributes:
      - name: concept_id
        dataType: INT64
      - name: concept_name
        dataType: STRING
      - name: vocabulary_id
        dataType: STRING
      - name: vocabulary_name
        dataType: STRING
      - name: standard_concept
        dataType: STRING
      - name: concept_code
        dataType: STRING
  - name: brand
    attributes:
      - name: concept_id
        dataType: INT64
      - name: concept_name
        dataType: STRING
      - name: standard_concept
        dataType: STRING
      - name: concept_code
        dataType: STRING
  - name: measurement
    attributes:
      - name: concept_id
        dataType: INT64
      - name: concept_name
        dataType: STRING
      - name: vocabulary_id
        dataType: STRING
      - name: vocabulary_name
        dataType: STRING
      - name: standard_concept
        dataType: STRING
      - name: concept_code
        dataType: STRING
  - name: visit
    attributes:
      - name: concept_id
        dataType: INT64
      - name: concept_name
        dataType: STRING
  - name: observation
    attributes:
      - name: concept_id
        dataType: INT64
      - name: concept_name
        dataType: STRING
      - name: vocabulary_id
        dataType: STRING
      - name: vocabulary_name
        dataType: STRING
      - name: standard_concept
        dataType: STRING
      - name: concept_code
        dataType: STRING
  - name: device
    attributes:
      - name: concept_id
        dataType: INT64
      - name: concept_name
        dataType: STRING
      - name: vocabulary_id
        dataType: STRING
      - name: vocabulary_name
        dataType: STRING
      - name: standard_concept
        dataType: STRING
      - name: concept_code
        dataType: STRING
  - name: condition_occurrence
    attributes:
      - name: condition_occurrence_id
        dataType: INT64
      - name: person_id
        dataType: INT64
      - name: condition_concept_id
        dataType: INT64
      - name: condition_name
        dataType: STRING
      - name: condition_standard
        dataType: STRING
      - name: condition_concept_code
        dataType: STRING
  - name: concept
    attributes:
      - name: concept_id
        dataType: INT64
      - name: concept_name
        dataType: STRING
      - name: domain_id
        dataType: STRING
      - name: vocabulary_id
        dataType: STRING
      - name: vocabulary_name
        dataType: STRING
      - name: standard_concept
        dataType: STRING
      - name: concept_code
        dataType: STRING
relationships:
  - name: person_condition_occurrence
    entity1: person
    entity2: condition_occurrence
  - name: brand_ingredient
    entity1: brand
    entity2: ingredient
  - name: concept_id_person_gender
    entity1: concept
    entity2: person
  - name: concept_id_person_race
    entity1: concept
    entity2: person
  - name: concept_id_person_ethnicity
    entity1: concept
    entity2: person
  - name: concept_id_person_sex_at_birth
    entity1: concept
    entity2: person
  - name: concept_id_condition
    entity1: concept
    entity2: condition_occurrence
datasets:
  - name: aou_synthetic
    bigQueryDataset:
      projectId: broad-tanagra-dev
      datasetId: aou_synthetic_SR2019q4r4
    tables:
      - name: person
        columns:
          - name: person_id
            dataType: INT64
          - name: gender_concept_id
            dataType: INT64
          - name: race_concept_id
            dataType: INT64
          - name: ethnicity_concept_id
            dataType: INT64
          - name: sex_at_birth_concept_id
            dataType: INT64
      - name: condition_occurrence
        columns:
          - name: condition_occurrence_id
            dataType: INT64
          - name: person_id
            dataType: INT64
          - name: condition_concept_id
            dataType: INT64
      - name: concept
        columns:
          - name: concept_id
            dataType: INT64
          - name: concept_name
            dataType: STRING
          - name: domain_id
            dataType: STRING
          - name: standard_concept
            dataType: STRING
          - name: vocabulary_id
            dataType: STRING
          - name: concept_code
            dataType: STRING
          - name: concept_class_id
            dataType: STRING
      - name: vocabulary
        columns:
          - name: vocabulary_id
            dataType: STRING
          - name: vocabulary_name
            dataType: STRING
      - name: concept_relationship
        columns:
          - name: concept_id_1
            dataType: INT64
          - name: concept_id_2
            dataType: INT64
          - name: relationship_id
            dataType: STRING
  - name: omop_indexes
    bigQueryDataset:
      projectId: broad-tanagra-dev
      datasetId: aou_synthetic_SR2019q4r4_indexes
    tables:
      - name: flatten_snomed_conditions_0
        columns:
          - name: ancestor
            dataType: INT64
          - name: descendant
            dataType: INT64
      - name: concept_ancestor_descendant_1
        columns:
          - name: ancestor
            dataType: INT64
          - name: descendant
            dataType: INT64
entityMappings:
  - entity: person
    primaryKey:
      dataset: aou_synthetic
      table: person
      column: person_id
  - entity: condition
    primaryKey:
      dataset: aou_synthetic
      table: concept
      column: concept_id
    tableFilter:
      binaryColumnFilter:
        column:
          dataset: aou_synthetic
          table: concept
          column: domain_id
        operator: EQUALS
        stringVal: Condition
  - entity: procedure
    primaryKey:
      dataset: aou_synthetic
      table: concept
      column: concept_id
    tableFilter:
      binaryColumnFilter:
        column:
          dataset: aou_synthetic
          table: concept
          column: domain_id
        operator: EQUALS
        stringVal: Procedure
  - entity: ingredient
    primaryKey:
      dataset: aou_synthetic
      table: concept
      column: concept_id
    tableFilter:
      arrayColumnFilter:
        operator: AND
        binaryColumnFilters:
          - column:
              dataset: aou_synthetic
              table: concept
              column: domain_id
            operator: EQUALS
            stringVal: Drug
          - column:
              dataset: aou_synthetic
              table: concept
              column: concept_class_id
            operator: NOT_EQUALS
            stringVal: Brand Name
          - column:
              dataset: aou_synthetic
              table: concept
              column: concept_class_id
            operator: NOT_EQUALS
            stringVal: Branded Drug
          - column:
              dataset: aou_synthetic
              table: concept
              column: concept_class_id
            operator: NOT_EQUALS
            stringVal: Branded Drug Comp
          - column:
              dataset: aou_synthetic
              table: concept
              column: concept_class_id
            operator: NOT_EQUALS
            stringVal: Branded Drug Form
          - column:
              dataset: aou_synthetic
              table: concept
              column: concept_class_id
            operator: NOT_EQUALS
            stringVal: Branded Dose Group
  - entity: brand
    primaryKey:
      dataset: aou_synthetic
      table: concept
      column: concept_id
    tableFilter:
      arrayColumnFilter:
        operator: AND
        binaryColumnFilters:
          - column:
              dataset: aou_synthetic
              table: concept
              column: domain_id
            operator: EQUALS
            stringVal: Drug
          - column:
              dataset: aou_synthetic
              table: concept
              column: concept_class_id
            operator: EQUALS
            stringVal: Brand Name
  - entity: measurement
    primaryKey:
      dataset: aou_synthetic
      table: concept
      column: concept_id
    tableFilter:
      binaryColumnFilter:
        column:
          dataset: aou_synthetic
          table: concept
          column: domain_id
        operator: EQUALS
        stringVal: Measurement
  - entity: visit
    primaryKey:
      dataset: aou_synthetic
      table: concept
      column: concept_id
    tableFilter:
      binaryColumnFilter:
        column:
          dataset: aou_synthetic
          table: concept
          column: vocabulary_id
        operator: EQUALS
        stringVal: Visit
  - entity: observation
    primaryKey:
      dataset: aou_synthetic
      table: concept
      column: concept_id
    tableFilter:
      binaryColumnFilter:
        column:
          dataset: aou_synthetic
          table: concept
          column: domain_id
        operator: EQUALS
        stringVal: Observation
  - entity: device
    primaryKey:
      dataset: aou_synthetic
      table: concept
      column: concept_id
    tableFilter:
      binaryColumnFilter:
        column:
          dataset: aou_synthetic
          table: concept
          column: domain_id
        operator: EQUALS
        stringVal: Device
  - entity: condition_occurrence
    primaryKey:
      dataset: aou_synthetic
      table: condition_occurrence
      column: condition_occurrence_id
  - entity: concept
    primaryKey:
      dataset: aou_synthetic
      table: concept
      column: concept_id
attributeMappings:
  - attribute:
      entity: person
      attribute: person_id
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: person
        column: person_id
  - attribute:
      entity: person
      attribute: gender_concept_id
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: person
        column: gender_concept_id
  - attribute:
      entity: person
      attribute: gender
    lookupColumn:
      primaryTableLookupKey:
        dataset: aou_synthetic
        table: person
        column: gender_concept_id
      lookupTableKey:
        dataset: aou_synthetic
        table: concept
        column: concept_id
      lookupColumn:
        dataset: aou_synthetic
        table: concept
        column: concept_name
  - attribute:
      entity: person
      attribute: race_concept_id
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: person
        column: race_concept_id
  - attribute:
      entity: person
      attribute: race
    lookupColumn:
      primaryTableLookupKey:
        dataset: aou_synthetic
        table: person
        column: race_concept_id
      lookupTableKey:
        dataset: aou_synthetic
        table: concept
        column: concept_id
      lookupColumn:
        dataset: aou_synthetic
        table: concept
        column: concept_name
  - attribute:
      entity: person
      attribute: ethnicity_concept_id
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: person
        column: ethnicity_concept_id
  - attribute:
      entity: person
      attribute: ethnicity
    lookupColumn:
      primaryTableLookupKey:
        dataset: aou_synthetic
        table: person
        column: ethnicity_concept_id
      lookupTableKey:
        dataset: aou_synthetic
        table: concept
        column: concept_id
      lookupColumn:
        dataset: aou_synthetic
        table: concept
        column: concept_name
  - attribute:
      entity: person
      attribute: sex_at_birth_concept_id
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: person
        column: sex_at_birth_concept_id
  - attribute:
      entity: person
      attribute: sex_at_birth
    lookupColumn:
      primaryTableLookupKey:
        dataset: aou_synthetic
        table: person
        column: sex_at_birth_concept_id
      lookupTableKey:
        dataset: aou_synthetic
        table: concept
        column: concept_id
      lookupColumn:
        dataset: aou_synthetic
        table: concept
        column: concept_name
  - attribute:
      entity: condition
      attribute: concept_id
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: concept_id
  - attribute:
      entity: condition
      attribute: concept_name
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: concept_name
  - attribute:
      entity: condition
      attribute: vocabulary_id
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: vocabulary_id
  - attribute:
      entity: condition
      attribute: vocabulary_name
    lookupColumn:
      primaryTableLookupKey:
        dataset: aou_synthetic
        table: concept
        column: vocabulary_id
      lookupTableKey:
        dataset: aou_synthetic
        table: vocabulary
        column: vocabulary_id
      lookupColumn:
        dataset: aou_synthetic
        table: vocabulary
        column: vocabulary_name
  - attribute:
      entity: condition
      attribute: standard_concept
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: standard_concept
  - attribute:
      entity: condition
      attribute: concept_code
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: concept_code
  - attribute:
      entity: procedure
      attribute: concept_id
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: concept_id
  - attribute:
      entity: procedure
      attribute: concept_name
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: concept_name
  - attribute:
      entity: procedure
      attribute: vocabulary_id
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: vocabulary_id
  - attribute:
      entity: procedure
      attribute: vocabulary_name
    lookupColumn:
      primaryTableLookupKey:
        dataset: aou_synthetic
        table: concept
        column: vocabulary_id
      lookupTableKey:
        dataset: aou_synthetic
        table: vocabulary
        column: vocabulary_id
      lookupColumn:
        dataset: aou_synthetic
        table: vocabulary
        column: vocabulary_name
  - attribute:
      entity: procedure
      attribute: standard_concept
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: standard_concept
  - attribute:
      entity: procedure
      attribute: concept_code
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: concept_code
  - attribute:
      entity: ingredient
      attribute: concept_id
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: concept_id
  - attribute:
      entity: ingredient
      attribute: concept_name
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: concept_name
  - attribute:
      entity: ingredient
      attribute: vocabulary_id
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: vocabulary_id
  - attribute:
      entity: ingredient
      attribute: vocabulary_name
    lookupColumn:
      primaryTableLookupKey:
        dataset: aou_synthetic
        table: concept
        column: vocabulary_id
      lookupTableKey:
        dataset: aou_synthetic
        table: vocabulary
        column: vocabulary_id
      lookupColumn:
        dataset: aou_synthetic
        table: vocabulary
        column: vocabulary_name
  - attribute:
      entity: ingredient
      attribute: standard_concept
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: standard_concept
  - attribute:
      entity: ingredient
      attribute: concept_code
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: concept_code
  - attribute:
      entity: brand
      attribute: concept_id
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: concept_id
  - attribute:
      entity: brand
      attribute: concept_name
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: concept_name
  - attribute:
      entity: brand
      attribute: standard_concept
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: standard_concept
  - attribute:
      entity: brand
      attribute: concept_code
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: concept_code
  - attribute:
      entity: measurement
      attribute: concept_id
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: concept_id
  - attribute:
      entity: measurement
      attribute: concept_name
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: concept_name
  - attribute:
      entity: measurement
      attribute: vocabulary_id
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: vocabulary_id
  - attribute:
      entity: measurement
      attribute: vocabulary_name
    lookupColumn:
      primaryTableLookupKey:
        dataset: aou_synthetic
        table: concept
        column: vocabulary_id
      lookupTableKey:
        dataset: aou_synthetic
        table: vocabulary
        column: vocabulary_id
      lookupColumn:
        dataset: aou_synthetic
        table: vocabulary
        column: vocabulary_name
  - attribute:
      entity: measurement
      attribute: standard_concept
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: standard_concept
  - attribute:
      entity: measurement
      attribute: concept_code
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: concept_code
  - attribute:
      entity: visit
      attribute: concept_id
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: concept_id
  - attribute:
      entity: visit
      attribute: concept_name
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: concept_name
  - attribute:
      entity: observation
      attribute: concept_id
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: concept_id
  - attribute:
      entity: observation
      attribute: concept_name
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: concept_name
  - attribute:
      entity: observation
      attribute: vocabulary_id
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: vocabulary_id
  - attribute:
      entity: observation
      attribute: vocabulary_name
    lookupColumn:
      primaryTableLookupKey:
        dataset: aou_synthetic
        table: concept
        column: vocabulary_id
      lookupTableKey:
        dataset: aou_synthetic
        table: vocabulary
        column: vocabulary_id
      lookupColumn:
        dataset: aou_synthetic
        table: vocabulary
        column: vocabulary_name
  - attribute:
      entity: observation
      attribute: standard_concept
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: standard_concept
  - attribute:
      entity: observation
      attribute: concept_code
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: concept_code
  - attribute:
      entity: device
      attribute: concept_id
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: concept_id
  - attribute:
      entity: device
      attribute: concept_name
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: concept_name
  - attribute:
      entity: device
      attribute: vocabulary_id
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: vocabulary_id
  - attribute:
      entity: device
      attribute: vocabulary_name
    lookupColumn:
      primaryTableLookupKey:
        dataset: aou_synthetic
        table: concept
        column: vocabulary_id
      lookupTableKey:
        dataset: aou_synthetic
        table: vocabulary
        column: vocabulary_id
      lookupColumn:
        dataset: aou_synthetic
        table: vocabulary
        column: vocabulary_name
  - attribute:
      entity: device
      attribute: standard_concept
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: standard_concept
  - attribute:
      entity: device
      attribute: concept_code
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: concept_code
  - attribute:
      entity: condition_occurrence
      attribute: condition_occurrence_id
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: condition_occurrence
        column: condition_occurrence_id
  - attribute:
      entity: condition_occurrence
      attribute: person_id
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: condition_occurrence
        column: person_id
  - attribute:
      entity: condition_occurrence
      attribute: condition_concept_id
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: condition_occurrence
        column: condition_concept_id
  - attribute:
      entity: condition_occurrence
      attribute: condition_name
    lookupColumn:
      primaryTableLookupKey:
        dataset: aou_synthetic
        table: condition_occurrence
        column: condition_concept_id
      lookupTableKey:
        dataset: aou_synthetic
        table: concept
        column: concept_id
      lookupColumn:
        dataset: aou_synthetic
        table: concept
        column: concept_name
  - attribute:
      entity: condition_occurrence
      attribute: condition_standard
    lookupColumn:
      primaryTableLookupKey:
        dataset: aou_synthetic
        table: condition_occurrence
        column: condition_concept_id
      lookupTableKey:
        dataset: aou_synthetic
        table: concept
        column: concept_id
      lookupColumn:
        dataset: aou_synthetic
        table: concept
        column: standard_concept
  - attribute:
      entity: condition_occurrence
      attribute: condition_concept_code
    lookupColumn:
      primaryTableLookupKey:
        dataset: aou_synthetic
        table: condition_occurrence
        column: condition_concept_id
      lookupTableKey:
        dataset: aou_synthetic
        table: concept
        column: concept_id
      lookupColumn:
        dataset: aou_synthetic
        table: concept
        column: concept_code
  - attribute:
      entity: concept
      attribute: concept_id
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: concept_id
  - attribute:
      entity: concept
      attribute: concept_name
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: concept_name
  - attribute:
      entity: concept
      attribute: domain_id
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: domain_id
  - attribute:
      entity: concept
      attribute: vocabulary_id
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: vocabulary_id
  - attribute:
      entity: concept
      attribute: vocabulary_name
    lookupColumn:
      primaryTableLookupKey:
        dataset: aou_synthetic
        table: concept
        column: vocabulary_id
      lookupTableKey:
        dataset: aou_synthetic
        table: vocabulary
        column: vocabulary_id
      lookupColumn:
        dataset: aou_synthetic
        table: vocabulary
        column: vocabulary_name
  - attribute:
      entity: concept
      attribute: standard_concept
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: standard_concept
  - attribute:
      entity: concept
      attribute: concept_code
    simpleColumn:
      columnId:
        dataset: aou_synthetic
        table: concept
        column: concept_code
relationshipMappings:
  - name: person_condition_occurrence
    foreignKey:
      primaryKey:
        dataset: aou_synthetic
        table: person
        column: person_id
      foreignKey:
        dataset: aou_synthetic
        table: condition_occurrence
        column: person_id
  - name: brand_ingredient
    intermediateTable:
      entity1EntityTableKey:
        dataset: aou_synthetic
        table: concept
        column: concept_id
      entity1IntermediateTableKey:
        dataset: aou_synthetic
        table: concept_relationship
        column: concept_id_1
      entity2EntityTableKey:
        dataset: aou_synthetic
        table: concept
        column: concept_id
      entity2IntermediateTableKey:
        dataset: aou_synthetic
        table: concept_relationship
        column: concept_id_2
  - name: concept_id_person_gender
    foreignKey:
      primaryKey:
        dataset: aou_synthetic
        table: concept
        column: concept_id
      foreignKey:
        dataset: aou_synthetic
        table: person
        column: gender_concept_id
  - name: concept_id_person_race
    foreignKey:
      primaryKey:
        dataset: aou_synthetic
        table: concept
        column: concept_id
      foreignKey:
        dataset: aou_synthetic
        table: person
        column: race_concept_id
  - name: concept_id_person_ethnicity
    foreignKey:
      primaryKey:
        dataset: aou_synthetic
        table: concept
        column: concept_id
      foreignKey:
        dataset: aou_synthetic
        table: person
        column: ethnicity_concept_id
  - name: concept_id_person_sex_at_birth
    foreignKey:
      primaryKey:
        dataset: aou_synthetic
        table: concept
        column: concept_id
      foreignKey:
        dataset: aou_synthetic
        table: person
        column: sex_at_birth_concept_id
  - name: concept_id_condition
    foreignKey:
      primaryKey:
        dataset: aou_synthetic
        table: concept
        column: concept_id
      foreignKey:
        dataset: aou_synthetic
        table: condition_occurrence
        column: condition_concept_id
hierarchies:
  - attribute:
      entity: condition
      attribute: concept_id
    descendantsTable:
      ancestor:
        dataset: omop_indexes
        table: concept_ancestor_descendant_1
        column: ancestor
      descendant:
        dataset: omop_indexes
        table: concept_ancestor_descendant_1
        column: descendant
    childrenTable:
      parent:
        dataset: aou_synthetic
        table: concept_relationship
        column: concept_id_1
      child:
        dataset: aou_synthetic
        table: concept_relationship
        column: concept_id_2
      tableFilter:
        binaryColumnFilter:
          column:
            dataset: aou_synthetic
            table: concept_relationship
            column: relationship_id
          operator: EQUALS
          stringVal: Subsumes
  - attribute:
      entity: procedure
      attribute: concept_id
    descendantsTable:
      ancestor:
        dataset: omop_indexes
        table: concept_ancestor_descendant_1
        column: ancestor
      descendant:
        dataset: omop_indexes
        table: concept_ancestor_descendant_1
        column: descendant
    childrenTable:
      parent:
        dataset: aou_synthetic
        table: concept_relationship
        column: concept_id_1
      child:
        dataset: aou_synthetic
        table: concept_relationship
        column: concept_id_2
      tableFilter:
        binaryColumnFilter:
          column:
            dataset: aou_synthetic
            table: concept_relationship
            column: relationship_id
          operator: EQUALS
          stringVal: Subsumes
  - attribute:
      entity: ingredient
      attribute: concept_id
    descendantsTable:
      ancestor:
        dataset: omop_indexes
        table: concept_ancestor_descendant_1
        column: ancestor
      descendant:
        dataset: omop_indexes
        table: concept_ancestor_descendant_1
        column: descendant
    childrenTable:
      parent:
        dataset: aou_synthetic
        table: concept_relationship
        column: concept_id_1
      child:
        dataset: aou_synthetic
        table: concept_relationship
        column: concept_id_2
      tableFilter:
        binaryColumnFilter:
          column:
            dataset: aou_synthetic
            table: concept_relationship
            column: relationship_id
          operator: EQUALS
          stringVal: Subsumes
  - attribute:
      entity: measurement
      attribute: concept_id
    descendantsTable:
      ancestor:
        dataset: omop_indexes
        table: concept_ancestor_descendant_1
        column: ancestor
      descendant:
        dataset: omop_indexes
        table: concept_ancestor_descendant_1
        column: descendant
    childrenTable:
      parent:
        dataset: aou_synthetic
        table: concept_relationship
        column: concept_id_1
      child:
        dataset: aou_synthetic
        table: concept_relationship
        column: concept_id_2
      tableFilter:
        binaryColumnFilter:
          column:
            dataset: aou_synthetic
            table: concept_relationship
            column: relationship_id
          operator: EQUALS
          stringVal: Subsumes
  - attribute:
      entity: condition_occurrence
      attribute: condition_concept_id
    descendantsTable:
      ancestor:
        dataset: omop_indexes
        table: flatten_snomed_conditions_0
        column: ancestor
      descendant:
        dataset: omop_indexes
        table: flatten_snomed_conditions_0
        column: descendant
    childrenTable:
      parent:
        dataset: aou_synthetic
        table: concept_relationship
        column: concept_id_1
      child:
        dataset: aou_synthetic
        table: concept_relationship
        column: concept_id_2
      tableFilter:
        binaryColumnFilter:
          column:
            dataset: aou_synthetic
            table: concept_relationship
            column: relationship_id
          operator: EQUALS
          stringVal: Subsumes
