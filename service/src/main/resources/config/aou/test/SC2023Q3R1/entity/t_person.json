{
  "name": "t_person",
  "idAttribute": "id",
  "attributes": [
    { "type": "SIMPLE", "name": "id", "dataType": "INT64" },
    { "type": "SIMPLE", "name": "year_of_birth", "dataType": "INT64" },
    { "type": "SIMPLE", "name": "age", "dataType": "INT64" },
    { "type": "KEY_AND_DISPLAY", "name": "gender", "dataType": "INT64" },
    { "type": "KEY_AND_DISPLAY", "name": "race", "dataType": "INT64" },
    { "type": "KEY_AND_DISPLAY", "name": "ethnicity", "dataType": "INT64" },
    { "type": "KEY_AND_DISPLAY", "name": "sex_at_birth", "dataType": "INT64" },
    { "type": "SIMPLE", "name": "has_fitbit_activity_summary", "dataType": "INT64" },
    { "type": "SIMPLE", "name": "has_fitbit_heart_rate_level", "dataType": "INT64" },
    { "type": "SIMPLE", "name": "has_fitbit_heart_rate_summary", "dataType": "INT64" },
    { "type": "SIMPLE", "name": "has_fitbit_steps_intraday", "dataType": "INT64" },
    { "type": "SIMPLE", "name": "has_fitbit_sleep_daily_summary", "dataType": "INT64" },
    { "type": "SIMPLE", "name": "has_fitbit_sleep_level", "dataType": "INT64" },
    { "type": "SIMPLE", "name": "has_fitbit", "dataType": "INT64" },
    { "type": "SIMPLE", "name": "has_array_data", "dataType": "INT64" },
    { "type": "SIMPLE", "name": "has_whole_genome_variant", "dataType": "INT64" },
    { "type": "SIMPLE", "name": "has_lr_whole_genome_variant", "dataType": "INT64" },
    { "type": "SIMPLE", "name": "has_structural_variant_data", "dataType": "INT64" },
    { "type": "SIMPLE", "name": "has_ehr_data", "dataType": "INT64" }
  ],

  "sourceDataMapping": {
    "dataPointer": "omop_dataset",
    "tablePointer": { "rawSqlFile": "t_person.sql" },
    "attributeMappings": {
      "id": { "value": { "column": "person_id" } },
      "age": { "value": { "column": "year_of_birth", "runtimeCalculated": true, "sqlFunctionWrapper": "EXTRACT(YEAR FROM CURRENT_DATE()) - ${fieldSql}" } },
      "gender": {
        "value": { "column": "gender_concept_id" },
        "display": {
          "column": "gender_concept_id",
          "foreignTable": "concept",
          "foreignKey": "concept_id",
          "foreignColumn": "concept_name" } },
      "race": {
        "value": { "column": "race_concept_id" },
        "display": {
          "column": "race_concept_id",
          "foreignTable": "concept",
          "foreignKey": "concept_id",
          "foreignColumn": "concept_name" } },
      "ethnicity": {
        "value": { "column": "ethnicity_concept_id" },
        "display": {
          "column": "ethnicity_concept_id",
          "foreignTable": "concept",
          "foreignKey": "concept_id",
          "foreignColumn": "concept_name" } },
      "sex_at_birth": {
        "value": { "column": "sex_at_birth_concept_id" },
        "display": {
          "column": "sex_at_birth_concept_id",
          "foreignTable": "concept",
          "foreignKey": "concept_id",
          "foreignColumn": "concept_name" } }
    } },

  "indexDataMapping": {
    "dataPointer": "index_dataset"
  }
}
