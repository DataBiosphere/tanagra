databaseChangeLog:
  - changeSet:
      id: postgres_rename_columns_and_constraints
      author: chenchalsubraveti
      dbms: postgresql
      changes:
        # for study_properties table
        - dropUniqueConstraint:
            constraintName: pk_sp
            tableName: study_property
        - renameColumn:
            newColumnName: property_key
            oldColumnName: key
            tableName: study_property
        - renameColumn:
            newColumnName: property_value
            oldColumnName: value
            tableName: study_property
        - addUniqueConstraint:
            constraintName: pk_sp
            tableName: study_property
            columnNames: study_id, property_key

        # for criteria_tag table
        - dropUniqueConstraint:
            constraintName: pk_ct
            tableName: criteria_tag
        - renameColumn:
            newColumnName: criteria_key
            oldColumnName: key
            tableName: criteria_tag
        - renameColumn:
            newColumnName: criteria_value
            oldColumnName: value
            tableName: criteria_tag
        - addUniqueConstraint:
            constraintName: pk_ct
            tableName: criteria_tag
            columnNames: criteria_id, criteria_group_id, criteria_group_section_id, cohort_revision_id, concept_set_id, criteria_key
