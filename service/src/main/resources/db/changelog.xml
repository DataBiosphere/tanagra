<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">
    <!-- define global column types for dbms -->
    <property global="true" dbms="postgresql" name="id.type" value="text"/>
    <property global="true" dbms="postgresql" name="text.type" value="text"/>
    <property global="true" dbms="postgresql" name="long.text.type" value="text"/>
    <property global="true" dbms="postgresql" name="date.timezone" value="timestamptz"/>

    <property global="true" dbms="mariadb,mysql" name="id.type" value="varchar(50)"/>
    <property global="true" dbms="mariadb,mysql" name="text.type" value="varchar(255)"/>
    <property global="true" dbms="mariadb,mysql" name="long.text.type" value="longtext"/>
    <property global="true" dbms="mariadb,mysql" name="date.timezone" value="timestamp"/>

    <!-- drop these properties when the corresponding columns are dropped -->
    <!-- Currently we use the study.properties column is used in test cases, so they are required -->
    <property global="true" dbms="postgresql" name="jsonb.type" value="jsonb"/>
    <property global="true" dbms="mariadb,mysql" name="jsonb.type" value="longtext"/>

    <!-- define changesets postgres-only properties not used-->
    <include file="changesets/20230410_schema_reset.yaml" relativeToChangelogFile="true"/>
    <include file="changesets/20230530_avoid_postgres_specific_features.yaml" relativeToChangelogFile="true"/>
    <include file="changesets/20230606_postgres_rename_columns_and_constraints.yaml" relativeToChangelogFile="true"/>
    <include file="changesets/20230608_schema_common_reset.yaml" relativeToChangelogFile="true"/>
</databaseChangeLog>
